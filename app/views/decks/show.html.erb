<h1> <%= @deck.deckTitle %> </h1>
 <% if !@deck.courseName.nil? %>
       
        <h2><%= @deck.subjectName %> - <%= @deck.courseNum %> - <%= @deck.courseName %> </h2>
        
    <% else %> 
        
        <h2><%= @deck.subjectName %> - <%= @deck.courseNum %> </h2>
        
    <% end %>


    <% if Deckrating.where(deck_id: @deck.deck_id).empty? %>
        <p> No ratings </p>
    <% else %>

        <% @liked = Deckrating.where(deck_id: @deck.deck_id, liked: true).count %>
        <% @total = Deckrating.where(deck_id: @deck.deck_id).count %>
        <% @percent = (@liked * 100 / @total) %>
        <p><%= @percent %>% liked </p>
    <% end %>


    <% if SavedDeck.find_by(:user_id => @userID, :deck_id => @deck.deck_id).nil? %>

    <%= link_to "Save this Deck", {:controller => "decks", :action => 'addfavorite', 
    :userID => @userID,:favid => @deck.deck_id} %>
     <br/>
     <% else %>
     
    <%= link_to "Un-Save this Deck", {:controller => "decks", :action => 'removefavorite', 
    :userID => @userID,:favid => @deck.deck_id} %>
    <br/>
     <% end %>
    
     <%  if Deckrating.find_by(deck_id: @deck.deck_id, user_id: @userID).nil? %>
         <p> <%= link_to "Like", {:controller => "decks", :action => 'rate', 
        :userID => @userID,:liked => true, :deckID => @deck.deck_id} %> / 
        <%= link_to "Dislike", {:controller => "decks", :action => 'rate', 
        :userID => @userID,:liked => false, :deckID => @deck.deck_id} %> </p>

    <% else %>
        <%  if Deckrating.find_by(deck_id: @deck.deck_id, user_id: @userID).liked == true %>
        <p> Deck liked. <%= link_to "Dislike", {:controller => "decks", :action => 'rate', 
         :userID => @userID,:liked => false, :deckID => @deck.deck_id} %> 
          </p> 
        <% else %>
        <p> Deck disliked. <%= link_to "Like", {:controller => "decks", :action => 'rate', 
        :userID => @userID,:liked => true, :deckID => @deck.deck_id} %>  </p> 
        <% end %>
        <%= link_to "Unrate", {:controller => "decks", :action => 'unrate', 
         :userID => @userID, :deckID => @deck.deck_id} %>
    <% end %>


    <% @array = @cards.to_a %>
  <% 
      card = @array.at(@count)
  %>

        <div>
        <p class="ex4"> <b>Question:</b> <br/> <%= card.qtext %></p>
        </div>
        
        <div>
        <p class="ex4"> <b>Answer:</b> <br/><%= card.atext %></p>
        </div> 

    <%= link_to "View this Card", card_path(card.card_id) %>
     <br/>

    <% if !@card.nil? %>
    <% if Deck.find_by(deck_id: @card.deck_id).user_id == @userID %>


    <%= link_to "Edit this Card", edit_card_path(card.card_id)%>
     <br/>
     <%= link_to "Delete this Card", @card, method: :delete, data: { confirm: "You sure?" } %>
    <br/> 


    <% end %>
     <% end %>

      <% if @count>0 %>
     <%= link_to "Previous Card", deck_path(card.deck_id, :count => @count-1), 
     class: "btn btn-large btn-primary" %>
     <% end %>

      <% if @count<(@array.size - 1) %>
     <%= link_to "Next Card", deck_path(card.deck_id, :count => @count+1), 
      class: "btn btn-large btn-primary" %>
     <% end %>


